"use strict";angular.module("gulu",["ngAnimate","ngCookies","ngTouch","ngSanitize","ngResource","ui.router","ui.bootstrap"]).config(["$stateProvider","$urlRouterProvider",function(e,a){e.state("home",{url:"/",templateUrl:"app/main/main.html",controller:"MainCtrl"}).state("form",{url:"/form/:d/:q/:qid/:demoid/",templateUrl:"app/main/form.html",controller:"FormCtrl"}).state("thanks",{url:"/thanks/",templateUrl:"app/main/thanks.html",controller:"FormCtrl"}),a.otherwise("/?qid=1&demoid=1")}]),angular.module("gulu").controller("NavbarCtrl",["$scope",function(e){e.date=new Date}]),angular.module("gulu").controller("MainCtrl",["$scope","$http","$rootScope","$state","$stateParams","$location","$cookieStore",function(e,a,t,o,s,i,n){e.param_qid=i.search().qid,e.param_demoid=i.search().demoid,e.url="http://takalam.me/api/question/?qid="+e.param_qid+"&demoid="+e.param_demoid,a.get(e.url).success(function(a){e.question=a.question,e.sub_questions=a.sub_questions,e.allow_comments=a.allow_comments,n.put("qIdCookie",e.param_qid),console.log(e.param_qid)}).error(function(){}),e.submitForm=function(s){var i=[];$('input[type="radio"]:checked').each(function(){i.push($(this).val())}),i=i.join(","),a({method:"POST",url:e.url,data:$.param({response:s,sub_question_responses:i}),headers:{"Content-Type":"application/x-www-form-urlencoded"}}).success(function(a){t.qData=a,n.put("uidCookie",t.qData.uid),e.allow_comments?o.go("form",{d:s,q:e.question,qid:e.param_qid,demoid:e.param_demoid}):o.go("thanks")}).error(function(){})}}]),angular.module("gulu").controller("FormCtrl",["$scope","$http","$rootScope","$stateParams","$state","$cookieStore",function(e,a,t,o,s,i){e.param=o.qid+o.demoid,e.question=o.q,console.log(e.qData);var n=i.get("qIdCookie"),l=i.get("uidCookie"),c=i.get("aSubmitted");e.qData=JSON.parse(JSON.stringify(n)),a.get("http://takalam.me/api/comment/?qid="+n).success(function(a){console.log(e.param_qid),e.qData=a}).error(function(){}),console.log(c),console.log(l),c==l&&(e.submitted=!0),e.submitComment=function(){a({method:"POST",url:"http://takalam.me/api/comment/?qid="+o.qid,data:$.param({uid:l,name:e.commentUser,comment:e.commentBody}),headers:{"Content-Type":"application/x-www-form-urlencoded"}}).success(function(){e.submitted=!0,i.put("aSubmitted",l),e.commentdecisionNew=o.d,e.commentUserNew=e.commentUser,e.commentBodyNew=e.commentBody}).error(function(){})}}]),angular.module("gulu").run(["$templateCache",function(e){e.put("app/main/form.html",'<div class="container"><div ng-include="\'components/navbar/navbar.html\'"></div><div class="well mbxl tr fsl f-ge">{{question}}</div><div class="col-xs-6"><div class="q-disagree"><div class="circle-num">{{qData.num_disagrees}}</div><div class="block">ضد</div></div></div><div class="col-xs-6"><div class="q-agree"><div class="circle-num">{{qData.num_agrees}}</div><div class="block">مع</div></div></div><div class="mtxl">&nbsp;</div><div class="row" ng-repeat="comment in qData.comments"><div class="col-sm-10"><div class="panel panel-default tr"><div class="panel-body bg-{{comment.response}}">{{comment.comment}}</div></div></div><div class="col-sm-2">{{comment.name}}</div></div><div class="row" ng-if="submitted"><div class="col-sm-10"><div class="panel panel-default tr"><div class="panel-body bg-{{commentdecisionNew}}">{{commentBodyNew}}</div></div></div><div class="col-sm-2">{{commentUserNew}}</div></div><div class="row" ng-show="!submitted"><div class="col-sm-10"><div class="panel panel-default"><div class=""><textarea class="form-control" ng-model="commentBody"></textarea></div></div><button class="btn btn-primary" ng-click="submitComment(qData.uid)">أرسل</button></div><div class="col-sm-2"><input type="text" placeholder="اسمك" class="form-control" ng-model="commentUser"></div></div><div class="footer"><p></p></div></div>'),e.put("app/main/main.html",'<div class="container"><div ng-include="\'components/navbar/navbar.html\'"></div><div class="q-bg" style="background-image: url(../assets/images/q{{param_qid}}.jpg);"></div><div class="well mbxl qestion-box"><div class="tr fsl f-ge main-qestion">{{question}}</div><form role="form" name="form" novalidate=""><div class="row tr f-ge" ng-repeat="(key, value) in sub_questions"><label class="control-label question">{{value}}</label><div class="col-sm-12"><div class="checkbox answers"><label><input type="radio" class="circle-check" name="sub_{{key}}" value="1" required=""> نعم</label> <label><input type="radio" class="circle-check" name="sub_{{key}}" value="0" required=""> لا</label></div></div></div></form></div><div class="row" ng-if="allow_comments"><div class="center-block"><div class="fsm center show-q{{param_qid}}">{{question}}</div><button class="btn btn-lg btn-danger mal" ng-click="submitForm(0)">ضد</button> <button class="btn btn-lg btn-success mal" ng-click="submitForm(1)">مع</button></div></div><div class="row" ng-if="!allow_comments"><div class="center-block"><button class="btn btn-lg btn-success mal" ng-click="submitForm(1)">Submit</button></div></div></div><div class="footer"><p></p></div>'),e.put("app/main/thanks.html",'<div class="container"><div ng-include="\'components/navbar/navbar.html\'"></div><div class="well mbxl tr fsl f-ge">thanks</div><div class="footer"><p></p></div></div>'),e.put("components/navbar/navbar.html",'<div class="center"><a href="/"><img src="/assets/images/takalam-logo.png" width="20%"></a></div>')}]);